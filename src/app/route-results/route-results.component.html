<h3>Outbound Journey</h3>

<mat-expansion-panel>
  <mat-expansion-panel-header>
    <mat-panel-title>
      {{idToNameId?.[routeResults.outbound.journey[0]]}} &rarr;
      {{idToNameId?.[routeResults.outbound.journey[routeResults.outbound.journey.length - 1]]}}
    </mat-panel-title>
    <mat-panel-description>
      {{ routeResults.outbound.totalMiles }} miles with
      {{ routeResults.outbound.numConnections }} connections costing £{{
        routeResults.outbound.cost.toFixed(2)
      }}
    </mat-panel-description>
  </mat-expansion-panel-header>
  <mat-list
    *ngFor="
      let id of routeResults!.outbound.journey;
      index as i;
      first as departure
    "
  >
    <mat-list-item>
      <p matLine>{{idToNameId?.[id]}}</p>
      <p matLine *ngIf="!departure">
        {{ routeResults!.outbound.miles[i - 1] }} miles
      </p>
    </mat-list-item>
  </mat-list>
</mat-expansion-panel>

<section *ngIf="routeResults!.showReturn">
  <h3>Return Journey</h3>
  <mat-expansion-panel>
    <mat-expansion-panel-header>
      <mat-panel-title>
        {{idToNameId?.[routeResults.return.journey[0]]}} &rarr;
        {{idToNameId?.[routeResults.return.journey[routeResults.return.journey.length - 1]]}}
      </mat-panel-title>
      <mat-panel-description>
        {{ routeResults.return.totalMiles }} miles with
        {{ routeResults.return.numConnections }} connections costing £{{
          routeResults.return.cost.toFixed(2)
        }}
      </mat-panel-description>
    </mat-expansion-panel-header>
    <mat-list
      *ngFor="
        let id of routeResults!.return.journey;
        index as i;
        first as departure
      "
    >
      <mat-list-item>
        <p matLine>{{idToNameId?.[id]}}</p>
        <p matLine *ngIf="!departure">
          {{ routeResults!.return.miles[i - 1] }} miles
        </p>
      </mat-list-item>
    </mat-list>
  </mat-expansion-panel>
</section>

<h3>
  Total Airline Cost: £{{ routeResults!.totalCost.toFixed(2) }} (£{{
    (routeResults!.totalCost / routeResults.numPassengers).toFixed(2)
  }}
  per person)
</h3>

<mat-slide-toggle color="primary" (change)="includeJourney = !includeJourney">
  Include journey to airport</mat-slide-toggle
>

<section *ngIf="includeJourney">
  <h3 *ngIf="journeyCost">
    Cost of entire journey: £
    {{ (journeyCost! + routeResults!.totalCost).toFixed(2) }}
    (£{{
      (
        journeyCost! +
        routeResults!.totalCost / routeResults.numPassengers
      ).toFixed(2)
    }}
    per person)
  </h3>
  <p *ngIf="!journeyCost">Journey to the airport hasn't been calculated yet</p>
</section>
